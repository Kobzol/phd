\documentclass[english,phd]{diploma}

% Packages
\usepackage[autostyle=true]{csquotes} % enhanced support for quotation marks, support for biblatex package
\usepackage[
    backend=biber,
    style=numeric,
    alldates=iso,
    maxnames=999,
    maxbibnames=3,
    defernumbers=true,
    urldate=short,
    sorting=none
]{biblatex}
\usepackage{dcolumn} % numeric column type
%\usepackage{subfig} % subtables and subfigures

\usepackage{subcaption} % subfigure
\captionsetup{compatibility=false}

\newcolumntype{T}{>{\footnotesize}p{6cm}} % Estee table

\usepackage[cpp]{diplomalst}
\usepackage{hyperref}
\usepackage{todonotes}
\usepackage{amsmath}
\usepackage{tikz}
\usetikzlibrary{graphs}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{automata}
\usetikzlibrary{math}
% Source code highlighting
\usepackage[outputdir=../out,newfloat]{minted}
% Multiple footnotes at one place
\usepackage[multiple]{footmisc}
% Autoref with capitalization (need to use Cref)
\usepackage[nameinlink]{cleveref}
% Horizontal margin configuration in description/enumerate/itemize
\usepackage{enumitem}

% Abbreviations (\gls, \glspl, \acrfull, \acrshort, \acrlong)
\usepackage[
    acronym,        % enable acronyms
    nomain,         % disable main glossary, we only use acronyms
    notranslate     % enable overriding \acronymname without involving babel
]{glossaries}

%\glsdisablehyper    % disable hyperlinks
\input{acronyms}
\renewcommand*{\acronymname}{List of Abbreviations}

\usemintedstyle{vs}
\setminted{tabsize=4}
% [escapeinside=||]
% [tabsize=4]
% [fontsize=\small]

% Fix arrow tips
\tikzset{tips=proper}

% Commands
\newcommand{\comment}[1]{}
\newcommand{\workshare}[1]{\emph{#1}}
\newcommand{\footnoteurl}[1]{\footnote{\url{#1}}}
\newcommand{\Autoref}[1]{\Cref{#1}}

% Tools
\newcommand{\estee}{\textsc{Estee}}
\newcommand{\rsds}{\textsc{RSDS}}
\newcommand{\hyperqueue}{\textsc{HyperQueue}}
\newcommand{\autoalloc}{\emph{autoalloc}}
\newcommand{\Autoalloc}{\emph{Autoalloc}}
\newcommand{\hq}{\textsc{HQ}}
\newcommand{\dask}{\textsc{Dask}}
\newcommand{\ray}{\emph{Ray}}
\newcommand{\snakemake}{\emph{SnakeMake}}
\newcommand{\pycompss}{\emph{PyCOMPSs}}

\graphicspath{{./imgs/}}

% TikZ styles
\tikzset{%
    task/.style={circle, draw},
    data/.style={rectangle, draw, rounded corners},
    arrow/.style={draw, thick, {->}}
}

\renewcommand\lstlistlistingname{List of Source Code Listings}

% Metadata
\ThesisAuthor{Ing. Jakub Beránek}

\ThesisSupervisor{Ing. Jan Martinovič, Ph.D.}

\CzechThesisTitle{Ergonomie a efektivita workflow na HPC klastrech}
\EnglishThesisTitle{Ergonomics and efficiency of workflows on HPC clusters}

\SubmissionYear{2024}

\CzechAbstract{TODO: přeložit}
\CzechKeywords{distribuované výpočty, výpočetní grafy, vysokovýkonnostní počítání}

%TODO: extend
\EnglishAbstract{This thesis deals with the execution of task graphs on High-performance Computing
(HPC) clusters (supercomputers), with focus on efficient usage of hardware resources and ergonomic interfaces for
task graph submission. Task graphs are a popular tool for executing scientific workflows on distributed
clusters. However, executing them on supercomputers introduces unique challenges, caused mainly by the
large scale of workflows and an unwieldy interaction with HPC allocation managers like PBS (Portable Batch System)
or Slurm. This work examines these challenges in detail and proposes approaches on alleviating them.

This thesis provides three main contributions. Firstly, it contains a comprehensive study of the performance
of various task schedulers and provides a simulation environment that enables experiments with different
task scheduling algorithms. Secondly, it analyzes the performance of a state of the art
task runtime \dask{} and provides an implementation of an alternative \dask{} server which
improves its performance significantly on HPC clusters. And primarily, it introduces a design
for effortless execution of task graphs on HPC clusters that facilitates efficient usage of hardware
resources. It also provides an implementation of this design within an HPC-tailored
task runtime called \hyperqueue{}, which offers an ergonomic way of executing task graphs while
achieving high hardware utilization on heterogeneous HPC clusters. \hyperqueue{} is available as
open-source software under the MIT (Massachusetts Institute of Technology) license at
\url{https://github.com/it4innovations/hyperqueue}.}
\EnglishKeywords{distributed computing, task graphs, hpc}

\Acknowledgement{I would like to thank my supervisor, Jan Martinovič, for his advices.
I would also like to thank Ada Böhm, Vojtěch Cima and Martin Šurkovský, who have co-authored several
publications with me and supported me during my PhD studies. I am especially grateful to Ada Böhm
for her mentorship and constant readiness to provide both research and technical guidance.

% TODO(Honza): ask which acknowledgments should be here
The development of \hyperqueue{} was supported by the LIGATE project. It has received funding from the
European High-Performance Computing Joint Undertaking (JU) under grant agreement No 956137.
% The tool Kaira, which is the central topic of this thesis, was supported by grants:
%GAČR P202/11/0340, IT4Innovations Center of Excellence (project CZ.1.05/1.1.00/
%02.0070), and student grant SP2011/25 prolonged as SP2012/127 and SP2013/145.

Finally, I would like to extend my gratitude to my wife Jana for her support and endless patience.}

\addbibresource{references.bib}
\addbibresource{publications.bib}

\makeglossaries
\begin{document}
\MakeTitlePages

%\glsaddall     % Automatically add all defined acronyms
%\addcontentsline{toc}{chapter}{List of Abbreviations}
\printglossaries

\listoffigures
\clearpage

\listoftables
\clearpage

\lstlistoflistings
%\addcontentsline{toc}{chapter}{List of Source Code Listings}
\clearpage

% Make sure that related publications are first in the bibliography list
\nocite{estee, rsds, hyperqueue, ligate}

\chapter{Introduction}
\label{ch:Introduction}
\input{chapters/introduction}

\chapter{Parallel and distributed computing}
\label{ch:distributed-computing}
\input{chapters/distributed-computing}

\chapter{Task-based programming model}
\label{ch:taskgraphs}
\input{chapters/taskgraphs}

\chapter{Task graph execution on HPC clusters}
\label{ch:sota}
\input{chapters/sota-challenges}

\chapter{Task scheduling analysis}
\label{ch:estee}
\input{chapters/estee}

\chapter{Task runtime optimization}
\label{ch:rsds}
\input{chapters/rsds}

\chapter{Task graph meta-scheduling}
\label{ch:hyperqueue}
\input{chapters/hyperqueue}

\chapter{Conclusion}
\label{ch:conclusion}
\input{chapters/conclusion}

%\chapter*{Závěr}
%\addcontentsline{toc}{chapter}{Závěr}
%\label{ch:conclusion-czech}
%\input{chapters/conclusion-czech}

\chapter*{List of own publication activities and other outcomes}
\label{ch:listofstudentsownpublicationactivitiesandotheroutcomes}
\addcontentsline{toc}{chapter}{\nameref{ch:listofstudentsownpublicationactivitiesandotheroutcomes}}

\input{chapters/publications-generated}

\chapter*{List of projects}
\label{ch:listofprojects}~\addcontentsline{toc}{chapter}{\nameref{ch:listofprojects}}
\input{chapters/projects}

% Bibliography
\printbibliography[heading=bibintoc, title={Bibliography}]

%\appendix
%\chapter{Foo}
%asd

\end{document}
